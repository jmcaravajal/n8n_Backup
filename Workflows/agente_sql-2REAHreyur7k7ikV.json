{"createdAt":"2025-01-21T12:17:50.651Z","updatedAt":"2025-01-21T15:46:01.000Z","id":"2REAHreyur7k7ikV","name":"Agente_SQL","active":false,"nodes":[{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[0,0],"id":"a91c1a57-e974-42b0-887c-5d7db5945990","name":"When chat message received","webhookId":"36700d58-0baf-4678-ac0e-ffda7444ad31"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.1,"position":[180,220],"id":"bfd98ac8-b377-4235-82a4-4970d179f57d","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"3rI1ba1dyQUjkGgM","name":"OpenAi account"}}},{"parameters":{"options":{"systemMessage":"=Eres asistente de DB llamado Elle.\n\nSe te harán preguntas en lenguaje natural y para reponderlas puedes utilizar las siguientes herramientas:\n\n'Esquema_BD' para comprender las tablas disponibles en la base de datos.\n\n'Esquema_tabla' te permite conocer la definición de la tabla que contienen los datos relevantes.\n\nFinalmente ejecuta la herramienta 'Query' para obtener los datos y responder en lenguaje natural.\n\nHoy es dia {{ $now }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[220,0],"id":"4ffc3136-1ed5-4226-aa12-70db103fa41d","name":"AI Agent"},{"parameters":{"operation":"executeQuery","query":"SELECT table_name, \n       column_name, \n       data_type, \n       is_nullable \nFROM information_schema.columns \nWHERE table_schema = 'public'\nORDER BY table_name, ordinal_position;","options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.5,"position":[380,220],"id":"272de339-3489-479d-994b-dfacde048796","name":"Esquema_BD","credentials":{"postgres":{"id":"P0GNochq2i0jzn65","name":"Postgres_pruebas"}}},{"parameters":{"operation":"executeQuery","query":"SELECT column_name, \n       data_type, \n       character_maximum_length, \n       is_nullable, \n       column_default \nFROM information_schema.columns \nWHERE table_name = 'contactos'\n  AND table_schema = 'public'\nORDER BY ordinal_position;","options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.5,"position":[520,220],"id":"b585bf25-ffae-493c-8b18-0b726e310b65","name":"Esquema_tabla","credentials":{"postgres":{"id":"P0GNochq2i0jzn65","name":"Postgres_pruebas"}}},{"parameters":{"operation":"executeQuery","query":"{{ $fromAI('QUERY') }}\n","options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.5,"position":[660,220],"id":"a891f383-a79c-461c-9074-92fea583ac15","name":"Consulta","credentials":{"postgres":{"id":"P0GNochq2i0jzn65","name":"Postgres_pruebas"}}}],"connections":{"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Esquema_BD":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Esquema_tabla":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Consulta":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"ae7e7768-333c-48aa-986c-7c232301e30f","triggerCount":0,"tags":[]}